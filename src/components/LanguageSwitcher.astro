---
interface Props {
  lang: 'zh-CN' | 'en';
  disableZh?: boolean;
  disableEn?: boolean;
}
const { lang, disableZh = false, disableEn = false } = Astro.props;
const targetZh = '/';
const targetEn = '/en/';
---
<nav style="display:flex; gap: .5rem">
  <button id="to-zh" disabled={lang === 'zh-CN' || disableZh}>中文</button>
  <button id="to-en" disabled={lang === 'en' || disableEn}>English</button>
</nav>
<script is:inline>
  const zh = document.getElementById('to-zh') as HTMLButtonElement | null;
  const en = document.getElementById('to-en') as HTMLButtonElement | null;
  if (zh && !zh.disabled) zh.addEventListener('click', () => { document.cookie = 'lang=zh-CN; path=/; max-age=31536000'; location.href = targetZh; });
  if (en && !en.disabled) en.addEventListener('click', () => { document.cookie = 'lang=en; path=/; max-age=31536000'; location.href = targetEn; });
</script>
