---
import Layout from '../../layouts/Layout.astro';
import LanguageSwitcher from '../../components/LanguageSwitcher.astro';
import { getCollection } from 'astro:content';
import { SITE } from '../../site.config';
const posts = await getCollection('posts', ({ data }) => data.lang === 'en');
const alternates = { 'zh-CN': new URL('/', SITE.domain).href, en: new URL('/en/', SITE.domain).href };
---
<Layout lang="en" description="Personal blog" alternates={alternates}>
  <LanguageSwitcher lang="en" toZh="/" toEn="/en/" />
  <h1>{SITE.title}</h1>
  <ul>
    {posts.map((p) => (
      <li><a href={`/en/posts/${p.data.translationSlug}/`}>{p.data.title}</a>{p.data.description && (' â€” ' + p.data.description)}</li>
    ))}
  </ul>
</Layout>
